<p-dialog #dialog [modal]="true" [(visible)]="modalServiceVisible">
  <new-service [form]="serviceForm"></new-service>
</p-dialog>

<div class="flex min-h-full w-full flex-col items-center justify-center px-5 py-10">
  <logo-svg class="mb-8 w-[170px]" />
  <div class="mb-10 flex flex-col items-center justify-center">
    <h1 class="max-w-[38rem] text-center text-primary-default">Vamos Fazer sua primeira agenda</h1>
    <h2 class="mt-4 max-w-[30rem] text-center text-base text-gray-500">
      Agora com seu sistema configurado é possível fazermos sua primeira agenda
    </h2>
  </div>
  <form (ngSubmit)="onSubmit()" [formGroup]="form" class="w-full max-w-[530px]">
    <div class="grid grid-cols-2 gap-4">
      <div class="col-span-2 flex flex-col gap-2">
        <label for="Nome">Nome do Cliente</label>
        <input
          formControlName="name"
          type="text"
          [ngClass]="{
            'ng-invalid ng-dirty': form.get('name')?.invalid && (form.get('name')?.dirty || form.get('name')?.touched),
          }"
          placeholder="Digite o nome do cliente"
          pInputText
        />
        <small
          class="text-red-500"
          *ngIf="form.get('name')?.invalid && (form.get('name')?.dirty || form.get('name')?.touched)"
        >
          Nome da empresa é obrigatório
        </small>
      </div>

      <!-- services -->
      <div class="col-span-2 flex flex-col gap-2">
        <select-form
          label="Serviços"
          class="grow-[2]"
          [options]="services"
          [control]="form.controls.service"
          placeholder="Escolha o serviço"
          id="services"
        ></select-form>
      </div>

      <!-- duração -->

      <!--       <div class="col-span-2 flex flex-col gap-2">
        <label for="Duração">Duração do agendamento</label>

        <div class="col-span-2 flex flex-wrap gap-2">
          <select-form
            class="grow-[2]"
            [options]="hours"
            [control]="form.controls.hours"
            placeholder="00 Horas"
          ></select-form>
          <select-form
            class="grow-[2]"
            [options]="minutes"
            [control]="form.controls.minutes"
            placeholder="00 Minutos"
          ></select-form>
          <button pTooltip="Mudar Para Data" tooltipPosition="bottom" type="button">
            <i class="pi pi-calendar"></i>
          </button>
        </div>
      </div> -->

      <!-- phone -->
      <div class="col-span-2 grid grid-cols-2 gap-2">
        <div class="col-span-1 flex flex-col gap-2">
          <label for="Nome">Valor</label>
          <input
            formControlName="value"
            type="text"
            [ngClass]="{
              'ng-invalid ng-dirty':
                form.get('value')?.invalid && (form.get('value')?.dirty || form.get('value')?.touched),
            }"
            placeholder="Digite o Valor"
            pInputText
          />
          <small
            class="text-red-500"
            *ngIf="form.get('value')?.invalid && (form.get('value')?.dirty || form.get('value')?.touched)"
          >
            Valor é obrigatório
          </small>
        </div>
        <div class="col-span-1 flex flex-col gap-2">
          <label for="Nome">Celular de contato</label>
          <p-inputMask
            styleClass="w-full "
            mask="(99) 99999-9999"
            placeholder="(99) 99999-9999"
            [ngClass]="{
              'ng-invalid ng-dirty':
                form.get('phone')?.invalid && (form.get('phone')?.dirty || form.get('phone')?.touched),
            }"
            formControlName="phone"
            type="phone"
          ></p-inputMask>
          <small
            class="text-red-500"
            *ngIf="form.get('phone')?.invalid && (form.get('phone')?.dirty || form.get('phone')?.touched)"
          >
            Celular é obrigatório
          </small>
        </div>
      </div>
    </div>

    <p-button [loading]="loading" type="submit" styleClass="mt-11 block w-full " label="Prosseguir" />
  </form>

  <small *ngIf="errorMessage" class="mt-2 text-red-600">{{ errorMessage }}</small>

  <a [routerLink]="['/']" class="mt-4 underline opacity-75">Quero configurar depois</a>
</div>
